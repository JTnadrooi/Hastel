<!DOCTYPE html>
<html>

<head>
    <title>Hastel</title>
</head>

<body>
    <h1>Hastel</h1>

    <input type="text" id="wordInput" placeholder="Enter a word">
    <button onclick="sendRequest()">Send Request</button>

    <p id="response"></p>

    <script>
        function sendRequest() {
            const word = document.getElementById("wordInput").value.trim();
            const responseElement = document.getElementById("response");

            if (!word) {
                responseElement.innerText = "Please enter a word.";
                return;
            }

            const url = new URL("http://localhost:5000/test/capitalize");
            url.searchParams.append("word", word);

            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 3000);

            fetch(url.toString(), { signal: controller.signal })
                .then(response => {
                    clearTimeout(timeoutId);
                    if (!response.ok) throw new Error(`Server error: ${response.status}`);
                    return response.text();
                })
                .then(data => responseElement.innerText = data)
                .catch(error => {
                    responseElement.innerText = "Error: " + error.message;
                    console.error(error);
                });
        }
    </script>
</body>

</html>